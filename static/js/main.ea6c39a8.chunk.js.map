{"version":3,"sources":["components/Controls/Controls.module.css","App.module.css","components/Game/Grid/Cell/Cell.module.css","components/Game/Game.module.css","components/Game/Grid/Grid.module.css","components/Game/Grid/Cell/Cell.tsx","components/Game/Grid/Grid.tsx","components/Game/hooks/useGameState/tickGameState.ts","components/Game/hooks/useGameState.ts","components/Game/hooks/useGameState/gameStateActions.ts","components/Game/Game.tsx","components/Game/hooks/useGameTick.ts","components/Game/hooks/useSetStateOnResize.ts","components/Game/hooks/useToggleCellCallback.ts","components/Controls/Controls.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","Cell","alive","column","row","onPress","data-testid","className","styles","cell","undefined","filter","v","join","onMouseDown","React","memo","PureCell","Grid","gameState","rows","columns","cellSize","onCellPressed","cells","callback","result","index","push","forEachCell","style","gridTemplateColumns","gridTemplateRows","tickGame","state","map","_","neighbours","cellIndex","Math","floor","onBottomEdge","onLeftEdge","onRightEdge","countNeighbouringCells","gameStateReducer","action","type","setAction","newState","toggleAction","tickGameState","tickAction","Array","length","fill","clearAction","random","aliveOdds","randomiseAction","console","warn","Game","ticksPerSecond","useReducer","dispatch","dispatcher","useEffect","intervalId","setInterval","clearInterval","useGameTick","useSetStateOnResize","useCallback","useToggleCellCallback","onClear","onRandomise","classes","actions","onClick","Controls","playing","speed","onPause","onPlay","onSetRows","onSetColumns","onSetSpeed","onRows","useNumberInput","onColumns","onSpeed","togglePlay","center","htmlFor","id","onInput","value","min","max","speedRow","step","toFixed","playButton","event","number","target","valueAsNumber","App","initialValue","useState","setValue","setTrue","setFalse","useSetBool","setRows","setColumns","setSpeed","title","href","controls","game","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sGACAA,EAAOC,QAAU,CAAC,SAAW,2BAA2B,SAAW,2BAA2B,WAAa,6BAA6B,OAAS,2B,iBCAjJD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,MAAQ,mBAAmB,SAAW,sBAAsB,KAAO,oB,kBCA5GD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,MAAQ,sB,gBCApDD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,QAAU,wB,iBCAtDD,EAAOC,QAAU,CAAC,KAAO,qB,uICYlB,SAASC,EAAT,GAEQ,IADXC,EACU,EADVA,MAAOC,EACG,EADHA,OAAQC,EACL,EADKA,IAAKC,EACV,EADUA,QAMpB,OAAO,wBACHC,cAAA,eAAqBF,EAArB,YAA4BD,EAA5B,KACAI,UAAW,CACPC,IAAOC,KACPP,EAAQM,IAAON,WAAQQ,GACzBC,QAAO,SAAAC,GAAC,OAAIA,KAAGC,KAAK,KACtBC,YAAaT,GAVM,WACnBA,GAAWA,EAAQD,EAAKD,M,qBCb1BF,EAAOc,IAAMC,KAAKC,GAajB,SAASC,EAAT,GAMQ,IALXC,EAKU,EALVA,UACAC,EAIU,EAJVA,KACAC,EAGU,EAHVA,QAGU,IAFVC,gBAEU,MAFD,GAEC,EADVC,EACU,EADVA,cAGMC,EAoBV,SAGIJ,EACAC,EACAI,GAIA,IAFA,IAAMC,EAAS,GACXC,EAAQ,EACHvB,EAAM,EAAGA,EAAMgB,EAAMhB,IAC1B,IAAK,IAAID,EAAS,EAAGA,EAASkB,EAASlB,IACnCuB,EAAOE,KAAKH,EAASrB,EAAKD,EAAQwB,MAG1C,OAAOD,EAlCOG,CAAYT,EAAMC,GAAS,SAACjB,EAAKD,EAAQwB,GACnD,OAAO,cAAC,EAAD,CAEHzB,MAAOiB,EAAUQ,GACjBvB,IAAKA,EACLD,OAAQA,EACRE,QAASkB,GALN,UACKnB,EADL,YACYD,OAQvB,OAAO,qBACHG,cAAY,OACZC,UAAWC,IAAOU,KAClBY,MAAO,CACHC,oBAAoB,UAAD,OAAYV,EAAZ,aAAwBC,EAAxB,OACnBU,iBAAiB,UAAD,OAAYZ,EAAZ,aAAqBE,EAArB,QALjB,SAOLE,I,YCvBSS,MATR,SAAkBC,EAAkBd,EAAcC,GACrD,OAAOa,EAAMC,KAAI,SAACC,EAAGT,GACjB,IAAMU,EASP,SACHC,EACAJ,EACAd,EACAC,GAEA,IAAIK,EAAS,EACPtB,EAAMmC,KAAKC,MAAMF,EAAYjB,GAC7BlB,EAASmC,EAAYlB,EAIrBqB,EAAerC,EAAI,IAAMgB,EACzBsB,EAAwB,IAAXvC,EACbwC,EAAcxC,EAAO,IAAMkB,EAHP,IAARjB,IAOV8B,EAAMI,EAAYjB,IAAUK,KAC3BgB,GAAcR,EAAOI,EAAYjB,EAAW,IAAIK,KAChDiB,GAAeT,EAAOI,EAAYjB,EAAW,IAAIK,KAErDe,IAEGP,EAAMI,EAAYjB,IAAUK,KAC3BgB,GAAcR,EAAOI,EAAYjB,EAAW,IAAIK,KAChDiB,GAAeT,EAAOI,EAAYjB,EAAW,IAAIK,MAErDgB,GAAcR,EAAMI,EAAY,IAAIZ,KACpCiB,GAAeT,EAAMI,EAAY,IAAIZ,IAE1C,OAAOA,EAxCgBkB,CAAuBjB,EAAOO,EAAOd,EAAMC,GAG9D,OAFca,EAAMP,IAEa,IAAfU,GACI,IAAfA,MCFf,SAASQ,EAAiBX,EAAkBY,GACxC,OAAQA,EAAOC,MACX,IAAK,MAAO,OCNb,SAAmBD,GACtB,OAAOA,EAAOZ,MDKSc,CAAUF,GAC7B,IAAK,SAAU,OCIhB,SAAsBA,EAA+BZ,GACxD,IAAMP,EAASmB,EAAiCnB,MAC1CsB,EAAQ,YAAOf,GAErB,OADAe,EAAStB,IAAUsB,EAAStB,GACrBsB,EDRmBC,CAAaJ,EAAQZ,GAC3C,IAAK,OAAQ,OCiBd,SAAoBY,EAA6BZ,GACpD,OAAOiB,EAAcjB,EAAOY,EAAO1B,KAAM0B,EAAOzB,SDlBxB+B,CAAWN,EAAQZ,GACvC,IAAK,QAAS,OC4Bf,SAAqBY,EAA8BZ,GACtD,OAAOmB,MAAMnB,EAAMoB,QAAQC,MAAK,GD7BPC,CAAYV,EAAQZ,GACzC,IAAK,YAAa,OCqCnB,SAAyBY,EAAkCZ,GAC9D,OAAOA,EAAMC,KAAI,kBAAMI,KAAKkB,SAAWX,EAAOY,aDtCjBC,CAAgBb,EAAQZ,GAGrD,OADA0B,QAAQC,KAAK,kCAAmCf,GACzCZ,E,oBELJ,SAAS4B,EAAT,GAKQ,IAJX1C,EAIU,EAJVA,KACAC,EAGU,EAHVA,QAGU,IAFVC,gBAEU,MAFC,GAED,MADVyC,sBACU,MADO,GACP,IFZHhD,IAAMiD,WAAWnB,EAAkB,IEYhC,mBACH1B,EADG,KACQ8C,EADR,MCpBC,SACXF,EACA3C,EACAC,EACA6C,GAEAnD,IAAMoD,WAAU,WACZ,GAAIJ,EAAiB,EAAG,CACpB,IAAMK,EAAaC,aACf,kBAAMH,EAAW,CAACnB,KAAM,OAAQ1B,UAASD,WACzC,IAAO2C,GAEX,OAAO,kBAAMO,cAAcF,OAEhC,CAACL,EAAgB1C,EAASD,EAAM8C,IDQnCK,CAAYR,EAAgB3C,EAAMC,EAAS4C,GEtBhC,SACX7C,EACAC,EACA6C,GAEAnD,IAAMoD,WAAU,WACZD,EAAW,CACPnB,KAAM,MACNb,MAAOmB,MAAMjC,EAAOC,GAASkC,MAAK,OAEvC,CAACnC,EAAMC,EAAS6C,IFanBM,CAAoBpD,EAAMC,EAAS4C,GACnC,IAAM1C,EGxBK,SACXH,EACAC,EACA6C,GAEA,OAAOnD,IAAM0D,aAAY,SAACrE,EAAaD,GACnC+D,EAAW,CACPnB,KAAM,SACNpB,MAAOxB,EAAUC,EAAMiB,MAE5B,CAACA,EAAS6C,IHcSQ,CAAsBtD,EAAMC,EAAS4C,GACrDU,EAAU5D,IAAM0D,aAAY,kBAAMR,EAAS,CAAElB,KAAM,YAAY,CAACkB,IAChEW,EAAc7D,IAAM0D,aAAY,kBAAMR,EAAS,CAAElB,KAAM,YAAaW,UAAW,OAAQ,CAACO,IAE9F,OAAO,sBAAK3D,cAAY,OAAOC,UAAWsE,IAAQf,KAA3C,UACH,cAAC5C,EAAD,CACIC,UAAWA,EACXC,KAAMA,EACNC,QAASA,EACTC,SAAUA,EACVC,cAAeA,IAEnB,sBAAKhB,UAAWsE,IAAQC,QAAxB,UACI,wBAAQxE,cAAY,gBAAgByE,QAASH,EAA7C,uBACA,wBAAQtE,cAAY,YAAgByE,QAASJ,EAA7C,yB,oBItBL,SAASK,EAAT,GAWY,IAVfC,EAUc,EAVdA,QACA7D,EASc,EATdA,KACAC,EAQc,EARdA,QACA6D,EAOc,EAPdA,MAEAC,EAKc,EALdA,QACAC,EAIc,EAJdA,OACAC,EAGc,EAHdA,UACAC,EAEc,EAFdA,aACAC,EACc,EADdA,WAEMC,EAASC,EAAeJ,GACxBK,EAAYD,EAAeH,GAC3BK,EAAUF,EAAeF,GACzBK,EAAa7E,IAAM0D,aAAY,WACjCQ,EAAUE,IAAYC,MACxB,CAACH,EAASG,EAAQD,IAEpB,OAAO,sBAAK5E,UAAWsE,IAAQG,SAAxB,UACH,sBAAKzE,UAAWsE,IAAQgB,OAAxB,UAEI,uBAAOC,QAAQ,gBAAf,sBACA,uBACIC,GAAG,gBACHzF,cAAY,gBACZ0F,QAASN,EACTO,MAAO5E,EACP0B,KAAK,SACLmD,IA7CC,GA8CDC,IA7CC,KAgDL,uBAAOL,QAAQ,aAAf,mBACA,uBACIC,GAAG,aACHzF,cAAY,aACZ0F,QAASR,EACTS,MAAO7E,EACP2B,KAAK,SACLmD,IAxDmB,GAyDnBC,IAxDmB,QA4D3B,sBAAK5F,UAAWsE,IAAQuB,SAAS,IAAIvB,IAAQgB,OAA7C,UACI,uBAAOC,QAAQ,cAAf,qBACA,uBACIC,GAAG,cACHzF,cAAY,cACZ0F,QAASL,EACTM,MAAOf,EACPnC,KAAK,QACLsD,KAnEoC,GAoEpCH,IApEE,GAqEFC,IArEmB,KA2D3B,IAYI,iCAAOjB,EAAMoB,QAAQ,GAArB,2BAIJ,qBAAK/F,UAAWsE,IAAQgB,OAAxB,SACI,wBAAQvF,cAAY,cAAcyE,QAASa,EAAYrF,UAAWsE,IAAQ0B,WAA1E,SACKtB,EAAU,QAAU,cAMrC,SAASQ,EACLhE,GAEA,OAAOV,IAAM0D,aAAY,SAAC+B,GACtB,IACMC,EADQD,EAAME,OACCC,cACrBlF,EAASgF,GAAU,KACpB,CAAChF,I,oBClDOmF,MAtCf,WACI,IAAM3B,EAuCV,SACI4B,GACD,IAAD,EAC4B9F,IAAM+F,SAASD,GAD3C,mBACSZ,EADT,KACgBc,EADhB,KAEQC,EAAUjG,IAAM0D,aAAY,kBAAMsC,GAAS,KAAO,CAACA,IACnDE,EAAWlG,IAAM0D,aAAY,kBAAMsC,GAAS,KAAQ,CAACA,IAC3D,MAAO,CAAEd,QAAOc,WAAUC,UAASC,YA7CnBC,EAAW,GADhB,EAEanG,IAAM+F,SAAS,IAF5B,mBAEJ1F,EAFI,KAEE+F,EAFF,OAGmBpG,IAAM+F,SAAS,IAHlC,mBAGJzF,EAHI,KAGK+F,EAHL,OAIerG,IAAM+F,SAAS,GAJ9B,mBAIJ5B,EAJI,KAIGmC,EAJH,KAMX,OAAO,sBAAK9G,UAAWsE,IAAQ+B,IAAxB,UAEH,mBAAGrG,UAAWsE,IAAQyC,MAAOC,KAAK,wDAAlC,SACI,yDAGJ,qBAAKhH,UAAWsE,IAAQ2C,SAAxB,SACI,cAACxC,EAAD,CACIC,QAASA,EAAQgB,MACjB7E,KAAMA,EACNC,QAASA,EACT6D,MAAOA,EAEPC,QAASF,EAAQgC,SACjB7B,OAAQH,EAAQ+B,QAChB3B,UAAW8B,EACX7B,aAAc8B,EACd7B,WAAY8B,MAIpB,qBAAK9G,UAAWsE,IAAQ4C,KAAxB,SACI,cAAC3D,EAAD,CACI1C,KAAMA,EACNC,QAASA,EACT0C,eAAgBkB,EAAQgB,MAAQf,EAAQ,UCpCxD,IAYewC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.ea6c39a8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Controls\":\"Controls_Controls__1rS1X\",\"speedRow\":\"Controls_speedRow__5Jv2z\",\"playButton\":\"Controls_playButton__HMOcH\",\"center\":\"Controls_center__10nLA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__13Z--\",\"title\":\"App_title__3fVuh\",\"controls\":\"App_controls__3G04N\",\"game\":\"App_game__6XBjV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cell\":\"Cell_cell__DjG-Q\",\"alive\":\"Cell_alive__2HSt9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Game\":\"Game_Game__Ea1xX\",\"actions\":\"Game_actions__2sVw8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Grid\":\"Grid_Grid__1tGCR\"};","import React from \"react\";\r\nimport styles from \"./Cell.module.css\";\r\n\r\nexport interface CellProps {\r\n    row: number;\r\n    column: number;\r\n    alive: CellAlive;\r\n    onPress?: (row: number, column: number) => void;\r\n}\r\n\r\n/**\r\n * A game Cell that is either dead or alive.\r\n */\r\nexport function Cell({\r\n    alive, column, row, onPress\r\n}: CellProps) {\r\n    const onPressHandler = () => {\r\n        onPress && onPress(row, column);\r\n    }\r\n\r\n    return <button\r\n        data-testid={`Cell[${row},${column}]`}\r\n        className={[\r\n            styles.cell,\r\n            alive ? styles.alive : undefined\r\n        ].filter(v => v).join(' ')}\r\n        onMouseDown={onPress && onPressHandler}\r\n    >{/*column.toString().padStart(2, '0')}<br />{row.toString().padStart(2, '0')*/}</button>;\r\n}\r\n","import React from \"react\";\r\nimport {Cell as PureCell, CellProps} from \"./Cell/Cell\";\r\nimport styles from \"./Grid.module.css\";\r\n\r\nconst Cell = React.memo(PureCell);\r\n\r\nexport interface GridProps {\r\n    gameState: GameState;\r\n    rows: number;\r\n    columns: number;\r\n    cellSize?: number;\r\n    onCellPressed?: CellProps['onPress'];\r\n}\r\n\r\n/**\r\n * Grid lays out each Cell.\r\n */\r\nexport function Grid({\r\n    gameState,\r\n    rows,\r\n    columns,\r\n    cellSize=50,\r\n    onCellPressed,\r\n}: GridProps) {\r\n\r\n    const cells = forEachCell(rows, columns, (row, column, index) => {\r\n        return <Cell\r\n            key={`${row}x${column}`}\r\n            alive={gameState[index]}\r\n            row={row}\r\n            column={column}\r\n            onPress={onCellPressed}\r\n        />;\r\n    });\r\n\r\n    return <div\r\n        data-testid='Grid'\r\n        className={styles.Grid}\r\n        style={{\r\n            gridTemplateColumns: `repeat(${columns}, ${cellSize}px)`,\r\n            gridTemplateRows: `repeat(${rows}, ${cellSize}px)`,\r\n        }}\r\n    >{cells}</div>;\r\n}\r\n\r\nfunction forEachCell<\r\n    Callback extends (row: number, column: number, index: number) => any\r\n>(\r\n    rows: number,\r\n    columns: number,\r\n    callback: Callback\r\n) {\r\n    const result = [] as ReturnType<Callback>[];\r\n    let index = 0;\r\n    for (let row = 0; row < rows; row++) {\r\n        for (let column = 0; column < columns; column++) {\r\n            result.push(callback(row, column, index++));\r\n        }\r\n    }\r\n    return result;\r\n}\r\n","/**\r\n * Returns a new version of the passed GameState, with cells flipped to conform to the rules.\r\n *\r\n * Any live cell with fewer than two live neighbours dies, as if by underpopulation.\r\n * Any live cell with two or three live neighbours lives on to the next generation.\r\n * Any live cell with more than three live neighbours dies, as if by overpopulation.\r\n * Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.\r\n *\r\n * @link https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life#Rules\r\n */\r\nexport function tickGame(state: GameState, rows: number, columns: number): GameState {\r\n    return state.map((_, index) => {\r\n        const neighbours = countNeighbouringCells(index, state, rows, columns);\r\n        const alive = state[index];\r\n\r\n        if (alive) return neighbours === 2 || neighbours === 3;\r\n        return neighbours === 3;\r\n    });\r\n}\r\nexport default tickGame;\r\n\r\nexport function countNeighbouringCells(\r\n    cellIndex: number,\r\n    state: GameState,\r\n    rows: number,\r\n    columns: number\r\n) {\r\n    let result = 0;\r\n    const row = Math.floor(cellIndex / columns);\r\n    const column = cellIndex % rows;\r\n\r\n    // On an edge?\r\n    const onTopEdge = row === 0;\r\n    const onBottomEdge = row+1 === rows;\r\n    const onLeftEdge = column === 0;\r\n    const onRightEdge = column+1 === columns;\r\n\r\n    if (!onTopEdge) {\r\n        // Shift index back by the number of columns to reach Cell above. If true, count it.\r\n        if (state[cellIndex - columns]) result++; // Top\r\n        if (!onLeftEdge && state[(cellIndex - columns) - 1]) result++; // Top left\r\n        if (!onRightEdge && state[(cellIndex - columns) + 1]) result++; // Top right\r\n    }\r\n    if (!onBottomEdge) {\r\n        // Shift index forwards by the number of columns to reach Cell below. If true, count it.\r\n        if (state[cellIndex + columns]) result++; // Bottom\r\n        if (!onLeftEdge && state[(cellIndex + columns) - 1]) result++; // Bottom left\r\n        if (!onRightEdge && state[(cellIndex + columns) + 1]) result++; // Bottom right\r\n    }\r\n    if (!onLeftEdge && state[cellIndex - 1]) result++; // Left\r\n    if (!onRightEdge && state[cellIndex + 1]) result++; // Right\r\n\r\n    return result;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n    GameStateAction,\r\n    setAction,\r\n    toggleAction,\r\n    tickAction,\r\n    clearAction,\r\n    randomiseAction\r\n} from \"./useGameState/gameStateActions\";\r\n\r\nexport default function useGameState() {\r\n    return React.useReducer(gameStateReducer, []);\r\n}\r\n\r\nfunction gameStateReducer(state: GameState, action: GameStateAction) {\r\n    switch (action.type) {\r\n        case 'set': return setAction(action);\r\n        case 'toggle': return toggleAction(action, state);\r\n        case 'tick': return tickAction(action, state);\r\n        case 'clear': return clearAction(action, state);\r\n        case 'randomise': return randomiseAction(action, state);\r\n    }\r\n    console.warn('Unknown gameStateReducer action', action);\r\n    return state;\r\n}\r\n","import tickGameState from \"./tickGameState\";\r\n\r\nexport type GameStateAction = GameStateSetAction | GameStateToggleAction | GameStateTickAction | GameStateClearAction | GameStateRandomiseAction;\r\ninterface GameStateActionBase {\r\n    type: string;\r\n}\r\n\r\n/**\r\n * Set the state to a specific value.\r\n */\r\nexport function setAction(action: GameStateSetAction) {\r\n    return action.state;\r\n}\r\nexport interface GameStateSetAction extends GameStateActionBase {\r\n    type: 'set';\r\n    state: GameState;\r\n}\r\n\r\n/**\r\n * Toggle the state on a specific cell\r\n */\r\nexport function toggleAction(action: GameStateToggleAction, state: GameState) {\r\n    const index = (action as GameStateToggleAction).index;\r\n    const newState = [...state];\r\n    newState[index] = !newState[index];\r\n    return newState;\r\n}\r\nexport interface GameStateToggleAction extends GameStateActionBase {\r\n    type: 'toggle';\r\n    index: number;\r\n}\r\n\r\n/**\r\n * Tick the state of the game.\r\n */\r\nexport function tickAction(action: GameStateTickAction, state: GameState) {\r\n    return tickGameState(state, action.rows, action.columns);\r\n}\r\nexport interface GameStateTickAction extends GameStateActionBase {\r\n    type: 'tick';\r\n    columns: number;\r\n    rows: number;\r\n}\r\n\r\n/**\r\n * Clear the Grid\r\n */\r\nexport function clearAction(action: GameStateClearAction, state: GameState) {\r\n    return Array(state.length).fill(false);\r\n}\r\nexport interface GameStateClearAction extends GameStateActionBase {\r\n    type: 'clear';\r\n}\r\n\r\n/**\r\n * Randomise the Grid\r\n */\r\nexport function randomiseAction(action: GameStateRandomiseAction, state: GameState) {\r\n    return state.map(() => Math.random() < action.aliveOdds);\r\n}\r\nexport interface GameStateRandomiseAction extends GameStateActionBase {\r\n    type: 'randomise';\r\n    aliveOdds: number;\r\n}\r\n","import React from \"react\";\r\nimport {Grid} from \"./Grid/Grid\";\r\nimport useGameState from \"./hooks/useGameState\";\r\nimport useSetStateOnResize from \"./hooks/useSetStateOnResize\";\r\nimport useGameTick from \"./hooks/useGameTick\";\r\nimport useToggleCellCallback from \"./hooks/useToggleCellCallback\";\r\nimport classes from \"./Game.module.css\";\r\n\r\nexport interface GameProps {\r\n    rows: number;\r\n    columns: number;\r\n    cellSize?: number;\r\n    ticksPerSecond?: number;\r\n}\r\n\r\n/**\r\n * The component that manages the game state.\r\n */\r\nexport function Game({\r\n    rows,\r\n    columns,\r\n    cellSize = 15,\r\n    ticksPerSecond = 0.5\r\n}: GameProps) {\r\n    const [gameState, dispatch] = useGameState();\r\n    useGameTick(ticksPerSecond, rows, columns, dispatch); // Tick game state\r\n    useSetStateOnResize(rows, columns, dispatch); // Update state if grid resized\r\n    const onCellPressed = useToggleCellCallback(rows, columns, dispatch); // On cell pressed, toggle it\r\n    const onClear = React.useCallback(() => dispatch({ type: 'clear' }), [dispatch]);\r\n    const onRandomise = React.useCallback(() => dispatch({ type: 'randomise', aliveOdds: 0.3 }), [dispatch]);\r\n\r\n    return <div data-testid='Game' className={classes.Game}>\r\n        <Grid\r\n            gameState={gameState}\r\n            rows={rows}\r\n            columns={columns}\r\n            cellSize={cellSize}\r\n            onCellPressed={onCellPressed}\r\n        />\r\n        <div className={classes.actions}>\r\n            <button data-testid=\"randomise-btn\" onClick={onRandomise}>Randomise</button>\r\n            <button data-testid=\"clear-btn\"     onClick={onClear}>Clear</button>\r\n        </div>\r\n    </div>;\r\n}\r\n","import React from \"react\";\r\nimport {GameStateTickAction} from \"./useGameState/gameStateActions\";\r\n\r\nexport default function useGameTick(\r\n    ticksPerSecond: number,\r\n    rows: number,\r\n    columns: number,\r\n    dispatcher: React.Dispatch<GameStateTickAction>\r\n) {\r\n    React.useEffect(() => {\r\n        if (ticksPerSecond > 0) {\r\n            const intervalId = setInterval(\r\n                () => dispatcher({type: 'tick', columns, rows}),\r\n                1000 / ticksPerSecond\r\n            );\r\n            return () => clearInterval(intervalId);\r\n        }\r\n    }, [ticksPerSecond, columns, rows, dispatcher]);\r\n}\r\n","import React from \"react\";\r\nimport {GameStateSetAction} from \"./useGameState/gameStateActions\";\r\n\r\nexport default function useSetStateOnResize(\r\n    rows: number,\r\n    columns: number,\r\n    dispatcher: React.Dispatch<GameStateSetAction>\r\n) {\r\n    React.useEffect(() => {\r\n        dispatcher({\r\n            type: 'set',\r\n            state: Array(rows * columns).fill(false),\r\n        });\r\n    }, [rows, columns, dispatcher]);\r\n}\r\n","import React from \"react\";\r\nimport {GameStateToggleAction} from \"./useGameState/gameStateActions\";\r\n\r\nexport default function useToggleCellCallback(\r\n    rows: number,\r\n    columns: number,\r\n    dispatcher: React.Dispatch<GameStateToggleAction>\r\n) {\r\n    return React.useCallback((row: number, column: number) => {\r\n        dispatcher({\r\n            type: 'toggle',\r\n            index: column + (row * columns),\r\n        });\r\n    }, [columns, dispatcher]);\r\n}\r\n","import React, {FormEvent} from \"react\";\r\nimport classes from \"./Controls.module.css\";\r\n\r\nconst ROWS_MIN = 10, COLUMNS_MIN = 10;\r\nconst ROWS_MAX = 80, COLUMNS_MAX = 80;\r\nconst SPEED_MIN = 0.1, SPEED_MAX = 10, SPEED_STEP = 0.1;\r\n\r\nexport interface ControlsProps {\r\n    playing: boolean;\r\n    rows: number;\r\n    columns: number;\r\n    speed: number;\r\n\r\n    onPause: () => void;\r\n    onPlay: () => void;\r\n    onSetRows: (rows: number) => void;\r\n    onSetColumns: (columns: number) => void;\r\n    onSetSpeed: (speed: number) => void;\r\n}\r\nexport function Controls({\r\n    playing,\r\n    rows,\r\n    columns,\r\n    speed,\r\n\r\n    onPause,\r\n    onPlay,\r\n    onSetRows,\r\n    onSetColumns,\r\n    onSetSpeed,\r\n}: ControlsProps) {\r\n    const onRows = useNumberInput(onSetRows);\r\n    const onColumns = useNumberInput(onSetColumns);\r\n    const onSpeed = useNumberInput(onSetSpeed);\r\n    const togglePlay = React.useCallback(() => {\r\n        playing ? onPause() : onPlay();\r\n    },[playing, onPlay, onPause])\r\n\r\n    return <div className={classes.Controls}>\r\n        <div className={classes.center}>\r\n\r\n            <label htmlFor=\"columns-input\">Columns:</label>\r\n            <input\r\n                id=\"columns-input\"\r\n                data-testid=\"columns-input\"\r\n                onInput={onColumns}\r\n                value={columns}\r\n                type=\"number\"\r\n                min={ROWS_MIN}\r\n                max={ROWS_MAX}\r\n            />\r\n\r\n            <label htmlFor=\"rows-input\">Rows:</label>\r\n            <input\r\n                id=\"rows-input\"\r\n                data-testid=\"rows-input\"\r\n                onInput={onRows}\r\n                value={rows}\r\n                type=\"number\"\r\n                min={COLUMNS_MIN}\r\n                max={COLUMNS_MAX}\r\n            />\r\n\r\n        </div>\r\n        <div className={classes.speedRow+' '+classes.center}>\r\n            <label htmlFor=\"speed-input\">Speed: </label>\r\n            <input\r\n                id=\"speed-input\"\r\n                data-testid=\"speed-input\"\r\n                onInput={onSpeed}\r\n                value={speed}\r\n                type=\"range\"\r\n                step={SPEED_STEP}\r\n                min={SPEED_MIN}\r\n                max={SPEED_MAX}\r\n            /> {/** TODO Make slider exponential */}\r\n            <span>{speed.toFixed(1)} ticks per second.</span>\r\n\r\n        </div>\r\n\r\n        <div className={classes.center}>\r\n            <button data-testid=\"play-toggle\" onClick={togglePlay} className={classes.playButton}>\r\n                {playing ? 'Pause' : 'Play'}\r\n            </button>\r\n        </div>\r\n    </div>;\r\n}\r\n\r\nfunction useNumberInput(\r\n    callback: (num: number) => void\r\n) {\r\n    return React.useCallback((event: FormEvent) => {\r\n        const input = event.target as HTMLInputElement;\r\n        const number = input.valueAsNumber;\r\n        callback(number || 0);\r\n    }, [callback]);\r\n}\r\n","import React from 'react';\r\nimport {Game} from \"./components/Game/Game\";\r\nimport {Controls} from \"./components/Controls/Controls\";\r\nimport classes from \"./App.module.css\";\r\n\r\n// TODO Add Error Boundary\r\n\r\nfunction App() {\r\n    const playing = useSetBool(false);\r\n    const [rows, setRows] = React.useState(30);\r\n    const [columns, setColumns] = React.useState(50);\r\n    const [speed, setSpeed] = React.useState(3);\r\n\r\n    return <div className={classes.App}>\r\n\r\n        <a className={classes.title} href=\"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\">\r\n            <h1>Conway's Game of Life</h1>\r\n        </a>\r\n\r\n        <div className={classes.controls}>\r\n            <Controls\r\n                playing={playing.value}\r\n                rows={rows}\r\n                columns={columns}\r\n                speed={speed}\r\n\r\n                onPause={playing.setFalse}\r\n                onPlay={playing.setTrue}\r\n                onSetRows={setRows}\r\n                onSetColumns={setColumns}\r\n                onSetSpeed={setSpeed}\r\n            />\r\n        </div>\r\n\r\n        <div className={classes.game}>\r\n            <Game\r\n                rows={rows}\r\n                columns={columns}\r\n                ticksPerSecond={playing.value ? speed : 0}\r\n            />\r\n        </div>\r\n\r\n    </div>;\r\n}\r\n\r\nexport default App;\r\n\r\nfunction useSetBool(\r\n    initialValue: boolean\r\n) {\r\n    const [value, setValue] = React.useState(initialValue);\r\n    const setTrue = React.useCallback(() => setValue(true), [setValue]);\r\n    const setFalse = React.useCallback(() => setValue(false), [setValue]);\r\n    return { value, setValue, setTrue, setFalse };\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}